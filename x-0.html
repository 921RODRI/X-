<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>‚ö° 3 EN RAYAS MULTIJUGADOR</title>
  <style>
    body {
      background: radial-gradient(circle, #0c0e1a 0%, #1e2140 50%, #3a3270 100%);
      background-attachment: fixed;
      overflow: hidden;
      font-family: 'Segoe UI', sans-serif;
      display: flex;
      flex-direction: column;
      align-items: center;
      margin: 0;
      min-height: 100vh;
      justify-content: center;
    }
    h1 {
      font-family: 'Times New Roman', serif;
      color: transparent;
      background: linear-gradient(90deg, #ff6b6b, #6b6bff, #6bff6b);
      -webkit-background-clip: text;
      background-clip: text;
      margin-bottom: 30px;
      text-shadow: 0 0 15px rgba(255,255,255,0.3);
      font-size: 2.5rem;
      letter-spacing: 3px;
      position: relative;
    }
    h1::after {
      content: '';
      position: absolute;
      bottom: -10px;
      left: 0;
      width: 100%;
      height: 3px;
      background: linear-gradient(90deg, #ff6b6b, #6b6bff, #6bff6b);
      border-radius: 5px;
    }
    #game-board {
      display: grid;
      grid-template-columns: repeat(3, 100px);
      grid-template-rows: repeat(3, 100px);
      gap: 12px;
      margin-bottom: 30px;
      perspective: 1000px;
    }
    .cell {
      width: 100px;
      height: 100px;
      background: rgba(255, 255, 255, 0.9);
      backdrop-filter: blur(5px);
      border: 2px solid rgba(255,255,255,0.3);
      border-radius: 15px;
      box-shadow: 0 5px 20px rgba(0,0,0,0.2), 
                  inset 0 0 10px rgba(0,0,0,0.1);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 3.5rem;
      cursor: pointer;
      transition: all 0.3s ease;
      user-select: none;
      transform-style: preserve-3d;
      color: transparent;
      background-clip: text;
      -webkit-background-clip: text;
      font-weight: bold;
    }
    .cell.X {
      background-image: linear-gradient(135deg, #e100ff, #ac00ff);
      text-shadow: 0 0 30px #e100ff, 0 0 60px #e100ff;
    }
    .cell.O {
      background-image: linear-gradient(135deg, #00eeff, #00a2ff);
      text-shadow: 0 0 30px #00eeff, 0 0 60px #00eeff;
    }
    .cell:hover {
      transform: translateY(-5px) scale(1.05);
      box-shadow: 0 8px 25px rgba(0,0,0,0.3), 
                 inset 0 0 15px rgba(0,0,0,0.1);
      border-color: rgba(255,255,255,0.5);
    }
    #status {
      font-size: 1.5rem;
      margin-bottom: 20px;
      min-height: 1.5em;
      color: white;
      text-shadow: 0 0 10px rgba(255,255,255,0.5);
      font-family: 'Roboto', sans-serif;
      background: rgba(255,255,255,0.1);
      padding: 10px 25px;
      border-radius: 30px;
      backdrop-filter: blur(5px);
      box-shadow: 0 5px 15px rgba(0,0,0,0.1);
      transition: all 0.3s ease;
    }
    #reset-btn {
      padding: 12px 30px;
      font-size: 1.2rem;
      background: linear-gradient(45deg, #6b6bff, #6bff9e);
      color: black;
      border: none;
      border-radius: 50px;
      cursor: pointer;
      transition: all 0.3s ease;
      box-shadow: 0 5px 15px rgba(107, 107, 255, 0.4);
      font-weight: bold;
      text-transform: uppercase;
      letter-spacing: 1px;
      position: relative;
      overflow: hidden;
    }
    #reset-btn::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
      transition: 0.5s;
    }
    #reset-btn:hover {
      transform: translateY(-3px);
      box-shadow: 0 8px 25px rgba(107, 107, 255, 0.6);
    }
    #reset-btn:hover::before {
      left: 100%;
    }
    .win {
      animation: winAnimation 1s ease-in-out infinite;
      filter: drop-shadow(0 0 15px currentColor);
    }
    @keyframes winAnimation {
      0% { transform: scale(1) rotate(0deg); }
      25% { transform: scale(1.1) rotate(5deg); }
      50% { transform: scale(1.15) rotate(-5deg); }
      75% { transform: scale(1.1) rotate(5deg); }
      100% { transform: scale(1) rotate(0deg); }
    }
    @keyframes confetti {
      0% { transform: translateY(0) rotate(0deg); opacity: 1; }
      100% { transform: translateY(100vh) rotate(720deg); opacity: 0; }
    }
    .celebration-emoji {
      position: fixed;
      font-size: 2rem;
      animation: emojiCelebration 2s ease-out forwards;
      z-index: 100;
      pointer-events: none;
    }
    @keyframes emojiCelebration {
      0% { transform: scale(0.5) translateY(0); opacity: 0; }
      10% { opacity: 1; }
      50% { transform: scale(1.5) translateY(-50px); }
      100% { transform: scale(1) translateY(-100px); opacity: 0; }
    }
  </style>
</head>
<body>
  <h1>‚ö° 3 EN RAYAS MULTIJUGADOR ‚ú®</h1>
  <div id="status"></div>
  <div id="game-board" style="display:none;"></div>
  <button id="reset-btn" style="display:none;">Reiniciar Juego</button>
  <div id="start-overlay" style="
    position: fixed;
    top: 0; left: 0; width: 100vw; height: 100vh;
    background: rgba(20,20,40,0.95);
    display: flex; align-items: center; justify-content: center;
    z-index: 10001;
    flex-direction: column;
  ">
    <button id="start-btn" style="
      font-size: 2rem;
      padding: 24px 48px;
      border-radius: 12px;
      background: #e94560;
      color: #fff;
      border: none;
      box-shadow: 0 4px 24px #0f3460;
      cursor: pointer;
      font-weight: bold;
      letter-spacing: 2px;
      transition: background 0.2s, color 0.2s;
    ">INICIAR JUEGO</button>
  </div>
  <script>
  const boardElem = document.getElementById('game-board');
  const statusElem = document.getElementById('status');
  const resetBtn = document.getElementById('reset-btn');
  const startOverlay = document.getElementById('start-overlay');
  const startBtn = document.getElementById('start-btn');
  let board, currentPlayer, gameActive, winCells = [];

  function initGame() {
    board = Array(9).fill('');
    currentPlayer = 'X';
    gameActive = true;
    winCells = [];
    statusElem.textContent = `Turno del jugador ${currentPlayer}`;
    boardElem.innerHTML = '';
    // Remove previous celebration emojis
    document.querySelectorAll('.celebration-emoji').forEach(e => {
      e.style.animation = 'none';
      setTimeout(() => e.remove(), 100);
    });
    for (let i = 0; i < 9; i++) {
      const cell = document.createElement('div');
      cell.className = 'cell';
      cell.dataset.index = i;
      cell.addEventListener('click', onCellClick);
      boardElem.appendChild(cell);
    }
  }

  function onCellClick(e) {
    const idx = e.target.dataset.index;
    if (!gameActive || board[idx]) return;
    board[idx] = currentPlayer;
    e.target.textContent = currentPlayer;
    if (checkWin()) {
      statusElem.textContent = `¬°El jugador ${currentPlayer} gana!`;
      gameActive = false;
      highlightWinningCells();
    } else if (board.every(cell => cell)) {
      statusElem.textContent = '¬°Es un empate!';
      gameActive = false;
    } else {
      currentPlayer = currentPlayer === 'X' ? 'O' : 'X';
      statusElem.textContent = `Turno del jugador ${currentPlayer}`;
    }
  }

  function checkWin() {
    const winningCombinations = [
      [0, 1, 2], [3, 4, 5], [6, 7, 8], // filas
      [0, 3, 6], [1, 4, 7], [2, 5, 8], // columnas
      [0, 4, 8], [2, 4, 6] // diagonales
    ];
    return winningCombinations.some(combination => {
      const [a, b, c] = combination;
      if (board[a] && board[a] === board[b] && board[a] === board[c]) {
        winCells = [a, b, c];
        return true;
      }
      return false;
    });
  }

  function highlightWinningCells() {
    winCells.forEach(index => {
      const cell = boardElem.children[index];
      cell.classList.add('win');
      
      // Add celebration emojis
      const center = boardElem.getBoundingClientRect();
      const emojis = ['üéâ', 'üèÜ', '‚ú®', 'üëë', 'ü•á'];
      for (let i = 0; i < 20; i++) {
        setTimeout(() => {
          const emoji = document.createElement('div');
          emoji.className = 'celebration-emoji';
          emoji.textContent = emojis[Math.floor(Math.random() * emojis.length)];
          emoji.style.left = `${Math.random()*100}vw`;
          emoji.style.top = `${Math.random()*100}vh`;
          emoji.style.animationDuration = `${Math.random()*1 + 2}s`;
          document.body.appendChild(emoji);
        }, i * 100);
      }
    });
  }

  resetBtn.addEventListener('click', () => {
    initGame();
    resetBtn.style.display = 'none';
    boardElem.style.display = 'grid';
    statusElem.textContent = '';
  });

  startBtn.addEventListener('click', () => {
    startOverlay.style.display = 'none';
    boardElem.style.display = 'grid';
    resetBtn.style.display = 'block';
    initGame();
  });
  </script>
</body>
</html>